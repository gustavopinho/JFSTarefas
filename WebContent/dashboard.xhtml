<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"> 

<h:head>
    <title>Dashboard | App Tarefas</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/js/all.js" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css" />
</h:head> 
<body> 
    <h1>Seja bem vindo, #{dashboard.usuario.nome}</h1>
    <h:form>
        <h:commandLink action="#{login.fazerLogout()}" value="Sair" />
    </h:form>
    <h2>Cadastrar Tarefa</h2>
    <div>#{dashboard.mensagem}</div>
    <h:form>
        <h:outputLabel for="descricao">Descrição:</h:outputLabel>
        <h:inputText id="descricao" value="#{dashboard.descricao}" required="true" redisplay="true" />
        <br />
        <h:message for = "descricao" style = "color:red" />
        <br />
        <h:outputLabel for="limite">Limite para Entrega:</h:outputLabel>
        <h:inputText id="limite" value="#{dashboard.limite}" required="true" redisplay="true">
             <f:convertDateTime locale="pt,BR" pattern="dd/MM/yyyy" />
        </h:inputText>
        <br />
        <h:message for = "limite" style = "color:red" />
        <br/>
        <h:commandButton action="#{dashboard.adicionarTarefa()}" value="Submit"></h:commandButton>
    </h:form>
    <h2>Tarefas Pendentes</h2>
    <h:form>
        <h:dataTable value="#{dashboard.getTarefas(false)}" var="t">
            <h:column>
                <f:facet name="header">ID:</f:facet>
                #{t.id}
            </h:column>
            <h:column>
                <f:facet name="header">Descrição:</f:facet>
                #{t.descricao}
            </h:column>
            <h:column>
                <f:facet name="header">Prazo para entrega:</f:facet>
                #{t.limite}
            </h:column>
            <h:column>
                <f:facet name="header">Criada em:</f:facet>
                #{t.cadastro}
            </h:column>
            <h:column>
                <f:facet name="header">Ações</f:facet>
                <h:commandButton value = "Concluír" action = "#{dashboard.marcaConcluida(t)}">
                </h:commandButton>
                <h:commandButton value = "Editar" action = "#{dashboard.editarTarefa(t)}">
                </h:commandButton>
                <h:commandButton value = "Excluir" action = "#{dashboard.removeTarefa(t)}">
                </h:commandButton>
            </h:column>
        </h:dataTable>
        
        <h2>Tarefas Finalizadas</h2>
        <h:dataTable value="#{dashboard.getTarefas(true)}" var="t">
            <h:column>
                <f:facet name="header">ID:</f:facet>
                #{t.id}
            </h:column>
            <h:column>
                <f:facet name="header">Descrição:</f:facet>
                #{t.descricao}
            </h:column>
            <h:column>
                <f:facet name="header">Criada em:</f:facet>
                #{t.cadastro}
            </h:column>
            <h:column>
                <f:facet name="header">Prazo para entrega:</f:facet>
                #{t.limite}
            </h:column>
            <h:column>
                <f:facet name="header">Data Entrega:</f:facet>
                #{t.entrega}
            </h:column>
            <h:column>
                <f:facet name="header">Ações</f:facet>
                <h:commandButton value = "Excluir" action = "#{dashboard.removeTarefa(t)}">
                </h:commandButton>
            </h:column>
        </h:dataTable>
    </h:form>
</body> 
</html>
